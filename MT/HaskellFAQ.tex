\section{Глоссарий по основным конструкциям функционального языка программирования Haskell: функторы, монады, аппликативные функторы}

\begin{defin} Класс типов

  Классом типов в языке Haskell -- это реализация некоторого общего интерфейса для совокупности типов.

  Представителем (или наследников) класса типов называется реализация данного класса для конкретного типа.
\end{defin}

\begin{defin} Функтор

  Функтор -- это однопараметрический класс типов, позволяющий пронести действие функции через значения,
  полученные в результате применения к их типу одноместного типового оператора.
\end{defin}

Определение в стандартной
библиотеке выглядит следующим образом:

\begin{lstlisting}[language=Haskell]
  class Functor f where
    fmap :: (a -> b) -> f a -> f b
\end{lstlisting}

Рассмотрим примеры:

\begin{itemize}
  \item Список (неограниченная в длине последовательность) является функтором:
  Определение в стандартной
  библиотеке выглядит следующим образом:

  \begin{lstlisting}[language=Haskell]
    instance Functor [] where
      fmap :: (a -> b) -> [a] -> [b]
      fmap f [] = []
      fmap f (x:xs) = (f x) : (fmap f xs)
  \end{lstlisting}

  Данный пример достаточно прост: реализация функтора для списка -- это функция высшего порядка, которая,
  принимая на входе одноместную функцию из типа $a$ в тип $b$ и список элементов типа $a$, возвращает список элементов типа $b$, который
  получен применением функции к каждому элементу списка, полученного на вход.
  \item Пара (тип декартова произведения типов) также функтор:
  \begin{lstlisting}[language=Haskell]
  instance Functor (b,) where
    fmap :: (a -> c) -> (b,a) -> (b,c)
    fmap f (x,y) = (x, f y)
  \end{lstlisting}

  Конструктор пары является двухпараметрическим типовым оператором, но мы сделали из него однопараметрический оператор фиксацией первого параметра.

  Данная реализация также довольно проста: на вход принимается функция из типа $a$ в тип $c$ и кортеж, в котором первая координата имеет тип $b$, а вторая -- тип $a$.
  На выходе мы получаем кортеж типа $(b,c)$, применяя полученную на вход функцию ко второй координате пары.

  \item Тип $Maybe$ -- это однопараметрический типовой оператор, для обработки неопределенных значений:
  \begin{lstlisting}[language=Haskell]
    data Maybe a = Nothing | Just a
  \end{lstlisting}

  Реализация функтора для типа $Maybe$:
  \begin{lstlisting}[language=Haskell]
    instance Functor Maybe where
      fmap :: (a -> b) -> Maybe a -> Maybe b
      fmap f Nothing = Nothing
      fmap f (Just x) = Just (f x)
  \end{lstlisting}

  Если второй аргумент является неопределенным значением (на вход передан $Nothing$), то и возвращается $Nothing$. Если же значение определено, то есть оно имеет вид $Just \: x$, тогда
  мы применяем функцию функцию к $x$, а результат вычисления оборачиваем в конструктор $Just$.
\end{itemize}
